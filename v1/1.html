<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mini Twitter Clone</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom scrollbar for webkit browsers */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #1a202c; /* dark-800 */
        }
        ::-webkit-scrollbar-thumb {
            background: #4a5568; /* gray-600 */
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #718096; /* gray-500 */
        }
        .tweet-action-icon:hover {
            background-color: rgba(29, 155, 240, 0.1); /* Twitter blue, low opacity */
            color: rgb(29, 155, 240);
        }
        .tweet-action-icon.liked {
            color: rgb(249, 24, 128); /* Twitter like pink */
        }
        .tweet-action-icon.liked:hover {
            background-color: rgba(249, 24, 128, 0.1);
        }
    </style>
</head>
<body class="bg-gray-900 text-white font-sans">

    <div class="container mx-auto flex min-h-screen max-w-screen-xl">

        <!-- Left Sidebar (Navigation) -->
        <aside class="w-1/5 border-r border-gray-700 p-4 sticky top-0 h-screen flex flex-col">
            <div class="text-2xl font-bold text-blue-500 mb-8">
                <!-- Twitter Logo SVG (simplified) -->
                <svg viewBox="0 0 24 24" aria-hidden="true" class="w-8 h-8 fill-current">
                    <g><path d="M23.643 4.937c-.835.37-1.732.62-2.675.733.962-.576 1.7-1.49 2.048-2.578-.9.534-1.897.922-2.958 1.13-.85-.904-2.06-1.47-3.4-1.47-2.572 0-4.658 2.086-4.658 4.66 0 .364.042.718.12 1.06-3.873-.195-7.304-2.05-9.602-4.868-.4.69-.63 1.49-.63 2.342 0 1.616.823 3.043 2.072 3.878-.764-.025-1.482-.234-2.11-.583v.06c0 2.257 1.605 4.14 3.737 4.568-.39.106-.803.162-1.227.162-.3 0-.593-.028-.877-.082.593 1.85 2.313 3.198 4.352 3.234-1.595 1.25-3.604 1.995-5.786 1.995-.376 0-.747-.022-1.112-.065 2.062 1.323 4.51 2.093 7.14 2.093 8.57 0 13.255-7.098 13.255-13.254 0-.2-.005-.402-.014-.602.91-.658 1.7-1.477 2.323-2.41z"></path></g>
                </svg>
            </div>
            <nav class="space-y-2">
                <a href="#" class="flex items-center space-x-3 p-3 rounded-full hover:bg-gray-800 transition duration-150">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m0 0l-7 7-7-7m10-10v10a1 1 0 01-1 1h-3" /></svg>
                    <span class="text-xl">Home</span>
                </a>
                <a href="#" class="flex items-center space-x-3 p-3 rounded-full hover:bg-gray-800 transition duration-150">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 20l4-16m2 16l4-16M6 9h12M6 15h12" /></svg>
                    <span class="text-xl">Explore</span>
                </a>
                <a href="#" class="flex items-center space-x-3 p-3 rounded-full hover:bg-gray-800 transition duration-150">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9" /></svg>
                    <span class="text-xl">Notifications</span>
                </a>
                <a href="#" class="flex items-center space-x-3 p-3 rounded-full hover:bg-gray-800 transition duration-150">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" /></svg>
                    <span class="text-xl">Messages</span>
                </a>
                <a href="#" class="flex items-center space-x-3 p-3 rounded-full hover:bg-gray-800 transition duration-150">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" /></svg>
                    <span class="text-xl">Profile</span>
                </a>
            </nav>
            <button class="mt-6 bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-6 rounded-full w-full text-lg">
                Tweet
            </button>
            <div class="mt-auto flex items-center space-x-3 p-3 rounded-full hover:bg-gray-800 cursor-pointer">
                <img src="https://via.placeholder.com/40/3B82F6/FFFFFF?text=U" alt="User Avatar" class="w-10 h-10 rounded-full">
                <div>
                    <p class="font-semibold">Your Name</p>
                    <p class="text-sm text-gray-400">@yourhandle</p>
                </div>
            </div>
        </aside>

        <!-- Main Content (Feed) -->
        <main class="w-3/5 border-r border-gray-700">
            <header class="sticky top-0 bg-gray-900 bg-opacity-80 backdrop-blur-md z-10">
                <h1 class="text-xl font-bold p-4 border-b border-gray-700">Home</h1>
            </header>

            <!-- Tweet Input Area -->
            <div class="p-4 border-b border-gray-700 flex space-x-4">
                <img src="https://via.placeholder.com/48/3B82F6/FFFFFF?text=U" alt="User Avatar" class="w-12 h-12 rounded-full">
                <div class="flex-1">
                    <textarea id="tweetInput" class="w-full bg-transparent text-xl p-2 outline-none resize-none placeholder-gray-500" rows="3" placeholder="What's happening?"></textarea>
                    <div class="flex justify-between items-center mt-2">
                        <div class="flex space-x-2 text-blue-500">
                            <!-- Add icons for media, poll etc. later -->
                        </div>
                        <div>
                            <span id="charCount" class="text-sm text-gray-500 mr-3">0/280</span>
                            <button id="tweetButton" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-full disabled:opacity-50" disabled>
                                Tweet
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Feed Area -->
            <div id="feedContainer">
                <!-- Tweets will be injected here by JavaScript -->
            </div>
        </main>

        <!-- Right Sidebar (Trends, Who to follow) -->
        <aside class="w-1/5 p-4 sticky top-0 h-screen">
            <div class="bg-gray-800 rounded-xl p-4">
                <input type="text" placeholder="Search Twitter" class="w-full bg-gray-700 text-white placeholder-gray-400 rounded-full py-2 px-4 focus:outline-none focus:ring-2 focus:ring-blue-500">
            </div>

            <div class="bg-gray-800 rounded-xl p-4 mt-4">
                <h2 class="text-xl font-bold mb-3">Trends for you</h2>
                <div class="space-y-3">
                    <div class="hover:bg-gray-700 p-2 rounded-md cursor-pointer">
                        <p class="text-gray-500 text-sm">Trending in YourLocation</p>
                        <p class="font-bold">#TailwindCSS</p>
                        <p class="text-gray-500 text-sm">120K Tweets</p>
                    </div>
                    <div class="hover:bg-gray-700 p-2 rounded-md cursor-pointer">
                        <p class="text-gray-500 text-sm">Web Development - Trending</p>
                        <p class="font-bold">JavaScript</p>
                        <p class="text-gray-500 text-sm">500K Tweets</p>
                    </div>
                    <div class="hover:bg-gray-700 p-2 rounded-md cursor-pointer">
                        <p class="text-gray-500 text-sm">Tech - Trending</p>
                        <p class="font-bold">AI Future</p>
                        <p class="text-gray-500 text-sm">80K Tweets</p>
                    </div>
                    <a href="#" class="text-blue-500 hover:underline pt-2 block">Show more</a>
                </div>
            </div>

            <div class="bg-gray-800 rounded-xl p-4 mt-4">
                <h2 class="text-xl font-bold mb-3">Who to follow</h2>
                <div class="space-y-3">
                    <div class="flex items-center justify-between hover:bg-gray-700 p-2 rounded-md">
                        <div class="flex items-center space-x-3">
                            <img src="https://via.placeholder.com/40/10B981/FFFFFF?text=T" alt="User Avatar" class="w-10 h-10 rounded-full">
                            <div>
                                <p class="font-semibold">Tailwind Labs</p>
                                <p class="text-sm text-gray-400">@tailwindcss</p>
                            </div>
                        </div>
                        <button class="bg-white text-black font-semibold py-1 px-3 rounded-full text-sm hover:bg-gray-200">Follow</button>
                    </div>
                     <div class="flex items-center justify-between hover:bg-gray-700 p-2 rounded-md">
                        <div class="flex items-center space-x-3">
                            <img src="https://via.placeholder.com/40/F59E0B/FFFFFF?text=J" alt="User Avatar" class="w-10 h-10 rounded-full">
                            <div>
                                <p class="font-semibold">JavaScript Daily</p>
                                <p class="text-sm text-gray-400">@js_daily</p>
                            </div>
                        </div>
                        <button class="bg-white text-black font-semibold py-1 px-3 rounded-full text-sm hover:bg-gray-200">Follow</button>
                    </div>
                    <a href="#" class="text-blue-500 hover:underline pt-2 block">Show more</a>
                </div>
            </div>
        </aside>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const tweetInputElement = document.getElementById('tweetInput');
            const tweetButtonElement = document.getElementById('tweetButton');
            const feedContainerElement = document.getElementById('feedContainer');
            const charCountElement = document.getElementById('charCount');
            const MAX_CHARS = 280;

            let tweets = [];

            // --- Tweet Actions SVGs ---
            const commentSVG = `<svg viewBox="0 0 24 24" aria-hidden="true" class="w-5 h-5 fill-current"><g><path d="M14.046 2.242l-4.148-.01h-.002c-4.374 0-7.8 3.427-7.8 7.802 0 4.098 3.186 7.206 7.465 7.37v3.828c0 .108.044.286.12.403.142.225.384.347.632.347.138 0 .277-.038.402-.118.264-.168 6.473-4.14 8.088-5.506 1.902-1.61 3.04-3.97 3.043-6.312v-.017c-.006-4.367-3.43-7.787-7.8-7.788zm-2.48 12.638c-.03-.01-.06-.018-.09-.032l-.018-.008c-.69-.315-1.13-.99-1.13-1.782V11.5c0-.276-.22-.5-.5-.5h-3c-.276 0-.5.22-.5.5v1.5c0 .832-.448 1.512-1.147 1.792l-.012.008c-.03.01-.06.018-.09.032-.348.166-.56.53-.56.926 0 .598.485 1.083 1.083 1.083h5.65c.598 0 1.083-.485 1.083-1.083 0-.398-.21-.762-.56- .928z"></path></g></svg>`;
            const retweetSVG = `<svg viewBox="0 0 24 24" aria-hidden="true" class="w-5 h-5 fill-current"><g><path d="M23.77 15.67c-.292-.293-.767-.293-1.06 0l-2.24 2.24v-3.345c0-2.97-2.415-5.385-5.385-5.385h-2.053V5.734l2.24-2.24c.293-.293.293-.768 0-1.06s-.768-.294-1.06 0l-3.884 3.886c-.14.14-.22.33-.22.53s.08.39.22.53l3.883 3.886c.145.145.336.22.53.22s.383-.074.53-.22c.293-.293.293-.767 0-1.06l-2.24-2.24h2.053c2.048 0 3.735 1.687 3.735 3.735v3.345l-2.24-2.24c-.293-.293-.768-.293-1.06 0s-.294.768 0 1.06l3.885 3.886c.14.14.33.22.53.22s.39-.08.53-.22l3.884-3.886c.292-.293.292-.768 0-1.06zm-10.686-8.06H5.697c-2.048 0-3.734-1.686-3.734-3.734v-3.346l2.24 2.24c.293.293.767.293 1.06 0s.293-.768 0-1.06L1.378.822C1.24.682 1.05.602.855.602s-.39.08-.53.22L-.56 4.708c-.292.293-.292.768 0 1.06s.767.293 1.06 0l2.24-2.24v3.346c0 2.97 2.416 5.385 5.386 5.385h7.387c.414 0 .75-.336.75-.75s-.336-.75-.75-.75z"></path></g></svg>`;
            const likeSVG = `<svg viewBox="0 0 24 24" aria-hidden="true" class="w-5 h-5 fill-current"><g><path d="M12 21.638h-.014C9.403 21.59 1.95 14.856 1.95 8.478c0-3.064 2.525-5.754 5.403-5.754 2.29 0 4.371 1.717 5.096 4.027.726-2.31 2.806-4.027 5.096-4.027 2.877 0 5.403 2.69 5.403 5.754 0 6.376-7.454 13.11-10.036 13.158l-.014.002z"></path></g></svg>`;
            const likedSVG = `<svg viewBox="0 0 24 24" aria-hidden="true" class="w-5 h-5 fill-current text-pink-500"><g><path d="M12 21.638h-.014C9.403 21.59 1.95 14.856 1.95 8.478c0-3.064 2.525-5.754 5.403-5.754 2.29 0 4.371 1.717 5.096 4.027.726-2.31 2.806-4.027 5.096-4.027 2.877 0 5.403 2.69 5.403 5.754 0 6.376-7.454 13.11-10.036 13.158l-.014.002zM12 3.732c-2.063 0-3.94.91-5.096 2.558-.26.38-.74.51-1.14.32-.39-.19-.63-.59-.63-1.03C5.08 3.706 7.02.93 10.13.93c1.64 0 3.15.78 4.13 2.06.18.23.49.33.77.24.29-.09.51-.33.59-.62C16.21 1.02 18.26 0 20.29 0c2.806 0 4.76 2.38 4.76 4.75 0 4.86-5.42 10.59-8.82 12.32C13.97 18.18 12 15.57 12 11.63c0-.35-.03-.7-.07-1.04-.1-.81-.47-1.54-1-2.13-.92-1-2.22-1.63-3.63-1.63z"></path></g></svg>`; // Not a true "filled" but distinct enough

            // --- Character Counter ---
            tweetInputElement.addEventListener('input', () => {
                const currentLength = tweetInputElement.value.length;
                charCountElement.textContent = `${currentLength}/${MAX_CHARS}`;
                
                if (currentLength > 0 && currentLength <= MAX_CHARS) {
                    tweetButtonElement.disabled = false;
                    charCountElement.classList.remove('text-red-500');
                } else {
                    tweetButtonElement.disabled = true;
                    if (currentLength > MAX_CHARS) {
                        charCountElement.classList.add('text-red-500');
                    } else {
                        charCountElement.classList.remove('text-red-500');
                    }
                }
            });

            // --- Load Tweets from localStorage ---
            function loadTweets() {
                const storedTweets = localStorage.getItem('miniTwitterCloneTweets');
                if (storedTweets) {
                    tweets = JSON.parse(storedTweets);
                }
                renderTweets();
            }

            // --- Save Tweets to localStorage ---
            function saveTweets() {
                localStorage.setItem('miniTwitterCloneTweets', JSON.stringify(tweets));
            }

            // --- Render Tweets to the DOM ---
            function renderTweets() {
                feedContainerElement.innerHTML = ''; // Clear existing tweets
                tweets.slice().reverse().forEach(tweet => { // Show newest first
                    const tweetDiv = document.createElement('div');
                    tweetDiv.className = 'p-4 border-b border-gray-700 flex space-x-4 hover:bg-gray-800/50 transition duration-150 cursor-pointer';
                    tweetDiv.setAttribute('data-id', tweet.id);

                    const timeAgo = formatTimeAgo(new Date(tweet.timestamp));

                    tweetDiv.innerHTML = `
                        <img src="${tweet.avatar}" alt="User Avatar" class="w-12 h-12 rounded-full">
                        <div class="flex-1">
                            <div class="flex items-center space-x-1">
                                <span class="font-bold">${tweet.user}</span>
                                <span class="text-gray-500">${tweet.handle}</span>
                                <span class="text-gray-500">·</span>
                                <span class="text-gray-500 text-sm">${timeAgo}</span>
                            </div>
                            <p class="mt-1 whitespace-pre-wrap">${escapeHTML(tweet.text)}</p>
                            <div class="flex justify-between items-center mt-3 text-gray-500 max-w-xs">
                                <button class="flex items-center space-x-1 p-2 rounded-full tweet-action-icon" data-action="comment">
                                    ${commentSVG}
                                    <span>${tweet.comments || 0}</span>
                                </button>
                                <button class="flex items-center space-x-1 p-2 rounded-full tweet-action-icon" data-action="retweet">
                                    ${retweetSVG}
                                    <span>${tweet.retweets || 0}</span>
                                </button>
                                <button class="flex items-center space-x-1 p-2 rounded-full tweet-action-icon ${tweet.liked ? 'liked' : ''}" data-action="like">
                                    ${tweet.liked ? likedSVG : likeSVG}
                                    <span>${tweet.likes || 0}</span>
                                </button>
                                <button class="p-2 rounded-full tweet-action-icon" data-action="share">
                                    <svg viewBox="0 0 24 24" aria-hidden="true" class="w-5 h-5 fill-current"><g><path d="M12 2.59l5.7 5.7-1.41 1.42L13 6.41V16h-2V6.41l-3.3 3.3-1.41-1.42L12 2.59zm7 14.41H5V11h2v4h10v-4h2v6z"></path></g></svg>
                                </button>
                            </div>
                        </div>
                    `;
                    feedContainerElement.appendChild(tweetDiv);
                });
            }
            
            // --- Handle Tweet Actions (Like, Retweet - simplified) ---
            feedContainerElement.addEventListener('click', (e) => {
                const actionButton = e.target.closest('button[data-action]');
                if (!actionButton) return;

                const tweetElement = actionButton.closest('div[data-id]');
                const tweetId = parseInt(tweetElement.dataset.id);
                const action = actionButton.dataset.action;

                const tweetIndex = tweets.findIndex(t => t.id === tweetId);
                if (tweetIndex === -1) return;

                if (action === 'like') {
                    tweets[tweetIndex].liked = !tweets[tweetIndex].liked;
                    tweets[tweetIndex].likes = (tweets[tweetIndex].likes || 0) + (tweets[tweetIndex].liked ? 1 : -1);
                } else if (action === 'retweet') {
                    // For simplicity, just increment. Real retweet is complex.
                    tweets[tweetIndex].retweets = (tweets[tweetIndex].retweets || 0) + 1;
                }
                 // Add other actions if needed

                saveTweets();
                renderTweets(); // Re-render to update UI. For performance, you'd update only the specific element.
            });


            // --- Add New Tweet ---
            tweetButtonElement.addEventListener('click', () => {
                const tweetText = tweetInputElement.value.trim();
                if (tweetText && tweetText.length <= MAX_CHARS) {
                    const newTweet = {
                        id: Date.now(), // Simple unique ID
                        user: "Demo User",
                        handle: "@demouser",
                        avatar: "https://via.placeholder.com/48/3B82F6/FFFFFF?text=D",
                        text: tweetText,
                        timestamp: new Date().toISOString(),
                        likes: 0,
                        retweets: 0,
                        comments: 0,
                        liked: false
                    };
                    tweets.push(newTweet);
                    saveTweets();
                    renderTweets();
                    tweetInputElement.value = '';
                    tweetButtonElement.disabled = true;
                    charCountElement.textContent = `0/${MAX_CHARS}`;
                    charCountElement.classList.remove('text-red-500');

                }
            });

            // --- Utility: Format Time Ago ---
            function formatTimeAgo(date) {
                const seconds = Math.floor((new Date() - date) / 1000);
                let interval = Math.floor(seconds / 31536000);
                if (interval > 1) return interval + "y";
                interval = Math.floor(seconds / 2592000);
                if (interval > 1) return interval + "mo";
                interval = Math.floor(seconds / 86400);
                if (interval > 1) return interval + "d";
                interval = Math.floor(seconds / 3600);
                if (interval > 1) return interval + "h";
                interval = Math.floor(seconds / 60);
                if (interval > 1) return interval + "m";
                return Math.floor(seconds) + "s";
            }
            
            // --- Utility: Escape HTML ---
            function escapeHTML(str) {
                const div = document.createElement('div');
                div.appendChild(document.createTextNode(str));
                return div.innerHTML;
            }

            // --- Initial Load ---
            loadTweets();
        });
    </script>

</body>
</html>